(this.webpackJsonpmaze=this.webpackJsonpmaze||[]).push([[0],{29:function(e,n,t){},44:function(e,n,t){},45:function(e,n,t){"use strict";t.r(n);var r,i,o=t(0),a=t.n(o),s=t(8),c=t.n(s),u=(t(29),t(3)),l=t(1),d=function(){return Object(l.jsx)("header",{children:"\u8ff7\u8def\u30b2\u30fc\u30e0"})},h=t(14),f=t.n(h),b=t(4),j=t(2),v=t(9),g=t(10),x=[[0,-1],[1,0],[0,1],[-1,0]],O=function(){function e(n){Object(v.a)(this,e),this.xSize=n,this.ySize=n}return Object(g.a)(e,[{key:"createMaze",value:function(){for(var e=new Array(this.xSize),n=0;n<this.xSize;n++){e[n]=new Array(this.ySize);for(var t=0;t<this.ySize;t++)e[n][t]=!1}return e[this.xSize-2][1]=!0,e}},{key:"judgeEdge",value:function(e,n){for(var t=[0,this.ySize-1,this.xSize-1,0],r=0;r<4;r++)if(r%2===0&&e===t[r]||r%2===1&&n===t[r])return!1;return!0}},{key:"judgeDirections",value:function(e,n,t,r){var i=e+x[t][0],o=n+x[t][1];return!(!1!==r[i][o]||!this.judgeEdge(i,o))}},{key:"getMovableDirections",value:function(e,n,t){for(var r=[],i=0;i<4;i++){for(var o=0,a=0;a<4;a++){var s=(a+2)%4;if(this.judgeDirections(e,n,i,t)){var c=e+x[i][0]+x[s][0],u=n+x[i][1]+x[s][1];t[c][u]||o++}}3===o&&r.push(i)}return r}},{key:"isDigable",value:function(e,n,t){return!(!t[e][n]||0===this.getMovableDirections(e,n,t).length)}},{key:"hasDigableRoads",value:function(e){for(var n=1;n<this.xSize-1;n++)for(var t=1;t<this.ySize-1;t++)if(this.isDigable(n,t,e))return!0;return!1}},{key:"digRoad",value:function(e,n,t,r){var i=[];return i[0]=e+x[t][0],i[1]=n+x[t][1],r[i[0]][i[1]]=!0,i}},{key:"digMaze",value:function(e){for(var n=this.xSize-2,t=1;this.hasDigableRoads(e);){var r=this.getMovableDirections(n,t,e);if(r.length>0){var i=Math.floor(Math.random()*r.length),o=this.digRoad(n,t,r[i],e);o.length>0&&(n=o[0],t=o[1])}else if(0===r.length){var a=this.getRestartPoint(e);0!==a&&(n=a[0],t=a[1])}}return e}},{key:"getRestartPoint",value:function(e){for(var n=[],t=1;t<this.xSize-1;t++)for(var r=1;r<this.ySize-1;r++)if(e[t][r]&&this.getMovableDirections(t,r,e).length>0){var i=[t,r];n.push(i);break}return n.length>0?n[Math.floor(Math.random()*n.length)]:0}},{key:"digGoal",value:function(e){for(var n=[1,this.ySize-2],t=this.createMaze(),r=this.digMaze(t);!t[n[0]][n[1]];)t=this.createMaze(),r=this.digMaze(t);return r[this.xSize-1][1]=!0,1===Number(e)&&(r[0][this.ySize-2]=!0),r}}]),e}(),m=[[0,-1],[1,0],[0,1],[-1,0]],p=function(){function e(n){Object(v.a)(this,e),this.mazeSize=n.length,this.mazeData=n}return Object(g.a)(e,[{key:"getAvailableRoads",value:function(e,n){for(var t=0;t<4;t++){var r=[n[0]+m[t][0],n[1]+m[t][1]];if(e[r[0]][r[1]])return r}return!1}},{key:"hasRoads",value:function(e){for(var n=0;n<this.mazeSize;n++)for(var t=0;t<this.mazeSize;t++)if(e[n][t])return!0;return!1}},{key:"getBranchPoint",value:function(e,n){if(!1===n)return!1;for(var t=0,r=0;r<4;r++){var i=[n[0]+m[r][0],n[1]+m[r][1]];e[i[0]][i[1]]&&t++}return t>1&&n}},{key:"getMeetingTermsRoute",value:function(e,n){for(var t=e[0],r=1;r<e.length;r++)for(var i=0;i<e[r].length;i++)e[r][i]===n&&(t=e[r]);return t}},{key:"getRouteToBranch",value:function(e,n){if(0===n.length)return[e];for(var t=this.getMeetingTermsRoute(n,e),r=t.length-1;r>=0;r--)if(t[r]===e)return t.slice(0,r+1);return[e]}},{key:"getStartPoint",value:function(e,n){for(var t=n.length-1;t>=0;t--)if(!1!==this.getAvailableRoads(e,n[t]))return n[t]}},{key:"getRoutes",value:function(e,n,t,r){for(var i=this.getRouteToBranch(n,t);this.hasRoads(e);){var o=this.getAvailableRoads(e,n),a=this.getBranchPoint(e,n);if(!1!==a&&r.push(a),e[n[0]][n[1]]=!1,!1===o)return 0!==i.length&&t.push(i),n=this.getStartPoint(e,r),this.getRoutes(e,n,t,r);i.push(o),n=o}return t}},{key:"getAnswerRoute",value:function(e){var n=JSON.parse(JSON.stringify(this.mazeData));n[this.mazeSize-1][1]=!1,n[0][this.mazeSize-2]=!1;var t=[this.mazeSize-2,1],r=[0,this.mazeSize-2],i=this.getRoutes(n,t,[],[]);if(1===Number(e))for(var o=0;o<i.length;o++)for(var a=0;a<i[o].length;a++)if(i[o][a][0]===r[0]+1&&i[o][a][1]===r[1]){var s=i[o].slice(0,a+1);return s.push(r),s}if(2===Number(e)){for(var c=i[0],u=1;u<i.length;u++)c.length<i[u].length&&(c=i[u]);return c}}}]),e}(),w=t(15),y=function(e){switch(e){case"ArrowUp":return[-1,0];case"ArrowRight":return[0,1];case"ArrowDown":return[1,0];case"ArrowLeft":return[0,-1];default:return[0,0]}},z=new O(10).digGoal(1),S=new p(z).getAnswerRoute(1),k=function(e){return e.goal[0]===e.xIndex&&e.goal[1]===e.yIndex||!0===e.answerShow?"finish":e.xIndex===e.start[0]&&e.yIndex===e.start[1]?"stop":"start"},I=function(e){return("000"+e).slice(-3)},M={size:10,mode:1,data:z,answerData:S,answerShow:!1,isModalOpen:!0,start:[9,1],goal:[0,8],movable:!1,xIndex:9,yIndex:1,minutes:"000",seconds:"000",milliSeconds:"000",time:0,timer:"stop",intervalID:-1,squareLength:500},D=Object(w.b)({name:"mazeState",initialState:M,reducers:{sizeChange:function(e,n){return Object(j.a)(Object(j.a)({},e),{},{size:n.payload})},modeChange:function(e,n){return Object(j.a)(Object(j.a)({},e),{},{mode:n.payload})},setMaze:function(e){var n,t,r,i=new O(e.size).digGoal(e.mode),o=new p(i).getAnswerRoute(e.mode);return clearInterval(e.intervalID),Object(j.a)(Object(j.a)({},e),{},{data:i,answerData:o,isModalOpen:!1,answerShow:!1,xIndex:e.size-1,yIndex:1,start:[e.size-1,1],goal:(n=e.size,t=e.mode,r=o,2===t?[r.slice(-1)[0][0],r.slice(-1)[0][1]]:[0,n-2]),minutes:"000",seconds:"000",milliSeconds:"000",time:0,timer:"stop",intervalID:-1})},openWindow:function(e,n){return clearInterval(e.intervalID),Object(j.a)(Object(j.a)({},e),{},{isModalOpen:n.payload,timer:k(e)})},closeWindow:function(e,n){return Object(j.a)(Object(j.a)({},e),{},{isModalOpen:n.payload,timer:k(e)})},movePoint:function(e,n){var t=function(e){return(e.xIndex!==e.goal[0]||e.yIndex!==e.goal[1])&&!0!==e.isModalOpen}(e);if(!t)return clearInterval(e.intervalID),Object(j.a)({},e);var r=function(e,n){if(e.xIndex===e.size-1&&"ArrowUp"!==n.key)return[e.xIndex,e.yIndex];var t=[e.xIndex+n.nextX,e.yIndex+n.nextY];return e.data[t[0]][t[1]]?t:[e.xIndex,e.yIndex]}(e,n.payload);return r[0]===e.goal[0]&&r[1]===e.goal[1]?(clearInterval(e.intervalID),Object(j.a)(Object(j.a)({},e),{},{xIndex:r[0],yIndex:r[1],movable:t,intervalID:-1,timer:"finish"})):Object(j.a)(Object(j.a)({},e),{},{xIndex:r[0],yIndex:r[1],movable:t})},showAnswer:function(e,n){return Object(j.a)(Object(j.a)({},e),{},{answerShow:n.payload,isModalOpen:!1})},startTimer:function(e,n){return Object(j.a)(Object(j.a)({},e),{},{intervalID:n.payload,timer:"start"})},updateTimer:function(e){var n=e.time+1,t=parseInt(n/100/60%100,10),r=parseInt(n/100%60,10),i=parseInt(n%100,10);return Object(j.a)(Object(j.a)({},e),{},{minutes:I(t),seconds:I(r),milliSeconds:I(i),time:n})}}}),A=Object(w.a)({reducer:D.reducer}),R=t(5),C=b.a.button(r||(r=Object(u.a)(['\n  & {\n    display: inline-block;\n    width: 40%;\n    height: 30px;\n    text-align: center;\n    text-decoration: none;\n    line-height: 100%;\n    outline: none;\n    background-color: #333;\n    color: #fff;\n    border: none;\n    white-space: nowrap;\n    margin: 3px;\n  }\n  ::before,\n  ::after {\n    position: absolute;\n    z-index: -1;\n    display: block;\n    content: "";\n  }\n  &,\n  ::before,\n  ::after {\n    -webkit-box-sizing: border-box;\n    -moz-box-sizing: border-box;\n    box-sizing: border-box;\n    -webkit-transition: all 0.3s;\n    transition: all 0.3s;\n  }\n  :hover {\n    background-color: #59b1eb;\n  }\n']))),P=function(){var e=Object(R.c)((function(e){return e})),n=e.size,t=e.mode,r=e.isModalOpen,i=e.timer,o=Object(R.b)(),a=function(e){var n=D.actions.sizeChange(Number(e));o(n)},s=function(e){var n=D.actions.modeChange(Number(e));o(n)},c=function(){var e=D.actions.setMaze(),n=D.actions.updateTimer(),t=setInterval((function(){return o(n)}),10),r=D.actions.startTimer(t);o(e),o(r)},u=function(){var e=A.getState().timer,n="stop"===e,t=D.actions.closeWindow(n);if(o(t),"start"===e||"pause"===e){var r=D.actions.updateTimer(),i=setInterval((function(){return o(r)}),10),a=D.actions.startTimer(i);o(a)}};return{size:n,mode:t,isModalOpen:r,handleModeChange:s,handleSizeChange:a,openModalWindow:function(){var e=D.actions.openWindow(!0);o(e)},closeModalWindow:u,sizeSelect:function(){var e=[10,20,30,40,50],t=e.filter((function(e){return e===n}));return Object(l.jsxs)("select",{className:"size-select",onChange:function(e){return a(e.target.value)},children:[Object(l.jsxs)("option",{value:t,children:[t," \xd7 ",t]}),e.map((function(e){if(e!==n)return Object(l.jsxs)("option",{value:e,children:[e," \xd7 ",e]},e)}))]})},modeSelect:function(){var e=t;return Object(l.jsxs)("select",{className:"mode",onChange:function(e){return s(e.target.value)},children:[Object(l.jsxs)("option",{value:e,children:[1===e?"\u5230\u9054":"\u6700\u9577","\u30e2\u30fc\u30c9"]}),[1,2].map((function(n){if(n!==e)return Object(l.jsxs)("option",{value:n,children:[1===n?"\u5230\u9054":"\u6700\u9577","\u30e2\u30fc\u30c9"]},n)}))]})},buttons:function(){return"stop"!==i?Object(l.jsxs)("div",{children:[Object(l.jsx)(C,{onClick:function(){return c()},children:"\u518d\u751f\u6210\uff06\u30b9\u30bf\u30fc\u30c8"}),Object(l.jsx)(C,{onClick:function(){return function(){var e=D.actions.showAnswer(!0);o(e)}()},children:"\u89e3\u7b54"}),Object(l.jsx)(C,{onClick:function(){return u()},children:"\u9589\u3058\u308b"})]}):Object(l.jsx)(C,{onClick:function(){return c()},children:"\u751f\u6210\uff06\u30b9\u30bf\u30fc\u30c8"})}}},N={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}};f.a.setAppElement("#root");var T,E,L,W,B,X,F,J,q,G,U=b.a.button(i||(i=Object(u.a)(["\n   {\n    width: 30%;\n    height: 20%;\n    color: grey;\n    background-color: skyblue;\n    font-size: 20px;\n    font-weight: 0;\n    text-decoration: none;\n    transition: 0.3s;\n    border-color: skyblue;\n    white-space: unwrap;\n  }\n  :hover {\n    color: #f2f2f2;\n  }\n"]))),Y=function(){var e=P(),n=e.size,t=e.mode,r=e.isModalOpen,i=e.openModalWindow,o=e.closeModalWindow,a=e.sizeSelect,s=e.modeSelect,c=e.buttons;return Object(l.jsxs)("div",{className:"menu",children:[Object(l.jsx)(U,{onClick:function(){return i()},children:"menu"}),Object(l.jsxs)(f.a,{isOpen:r,onRequestClose:function(){return o()},style:N,contentLabel:"EXAMPLE",overlayClassName:"overlay",children:[Object(l.jsx)("h3",{children:"\u8ff7\u8def\u30aa\u30d7\u30b7\u30e7\u30f3"}),Object(l.jsx)("p",{children:" \u8ff7\u8def\u30b5\u30a4\u30ba\u30fb\u30e2\u30fc\u30c9\u3092\u9078\u629e\u3057\u3066\u304f\u3060\u3055\u3044 "}),Object(l.jsxs)("ul",{className:"list",children:[Object(l.jsxs)("li",{children:["\u8ff7\u8def\u30b5\u30a4\u30ba: ",a()]}),Object(l.jsxs)("li",{children:["\u30e2\u30fc\u30c9\u9078\u629e: ",s()]})]}),Object(l.jsxs)("h4",{children:["\u73fe\u5728\u306e\u8ff7\u8def\u30b5\u30a4\u30ba\u306f",n," \xd7 ",n]}),Object(l.jsxs)("h4",{children:[1===t?"\u5230\u9054":"\u6700\u9577"," \u30e2\u30fc\u30c9\u3067\u3059"]}),Object(l.jsx)("br",{}),c()]})]})},H=function(){var e=Object(R.c)((function(e){return e}));return{minutes:e.minutes,seconds:e.seconds,milliSeconds:e.milliSeconds}},K=b.a.div(T||(T=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n"]))),Q=function(){var e=H(),n=e.minutes,t=e.seconds,r=e.milliSeconds;return Object(l.jsx)(K,{children:Object(l.jsxs)("h5",{children:[n," : ",t," : ",r]})})},V=t(24),Z=function(){var e=Object(R.c)((function(e){return e})),n=e.size,t=e.data,r=e.answerData,i=e.answerShow,o=e.xIndex,a=e.yIndex,s=e.goal,c=Object(R.b)();return{data:t,size:n,keyDownAction:function(e){var n=function(e){var n=y(e);return{nextX:n[0],nextY:n[1],key:e}}(e),t=D.actions.movePoint(n);c(t)},movePoint:function(e,n){return e===o&&n===a},showAnswer:function(e,n){if(!1===i)return!!function(e,n){return e===s[0]&&n===s[1]}(e,n);for(var t=0;t<r.length;t++)if(r[t][0]===e&&r[t][1]===n)return!0;return!1}}},$=b.a.div(E||(E=Object(u.a)(["\n  position: absolute;\n  top: 25%;\n  left: 50%;\n  transform: translateX(-50%);\n  min-width: 40%;\n  height: ","px;\n"])),(function(e){return e.height})),_=function(){var e=Z(),n=e.data,t=e.size,r=e.keyDownAction,i=e.movePoint,a=e.showAnswer,s=Object(o.useRef)(null),c=Object(o.useState)(0),u=Object(V.a)(c,2),d=u[0],h=u[1];Object(o.useEffect)((function(){var e=s.current.clientWidth;return h(e),document.addEventListener("keydown",(function(e){r(e.key)})),function(){document.removeEventListener("keydown",(function(e){r(e.key)}))}}),[]);var f=d/t,b={padding:0,height:f},v={padding:0,width:f,height:f,lineheight:f,border:"none",display:"inline-block",boxsizing:"border-box"};return Object(l.jsx)($,{ref:s,height:d,children:n.map((function(e,n){return Object(l.jsx)("div",{style:b,children:e.map((function(e,t){var r=e;return Object(l.jsx)("button",{className:i(n,t)?"move":"",style:Object(j.a)(Object(j.a)({},v),{},{backgroundColor:r?a(n,t)?"skyblue":"":"black"})},"row:".concat(n,",col:").concat(t))}))},"row:".concat(n))}))})},ee=t(23),ne=t.n(ee),te=function(){var e=Object(R.b)();return{buttonAction:function(n){var t=y(n),r={nextX:t[0],nextY:t[1],key:n},i=D.actions.movePoint(r);e(i)}}},re=b.a.div(L||(L=Object(u.a)(["\n  position: absolute;\n  bottom: 43%;\n  right: 60%;\n  display: flex;\n"]))),ie=b.a.div(W||(W=Object(u.a)(["\n  position: relative;\n"]))),oe=b.a.div(B||(B=Object(u.a)(["\n  border-right: 25px solid transparent;\n  border-bottom: 50px solid #00ecff;\n  border-left: 25px solid transparent;\n"]))),ae=Object(b.a)(oe)(X||(X=Object(u.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n"]))),se=Object(b.a)(oe)(F||(F=Object(u.a)(["\n  position: absolute;\n  top: 50px;\n  left: 50px;\n  transform: rotate(90deg);\n"]))),ce=Object(b.a)(oe)(J||(J=Object(u.a)(["\n  position: absolute;\n  top: 100px;\n  left: 0px;\n  transform: rotate(180deg);\n"]))),ue=Object(b.a)(oe)(q||(q=Object(u.a)(["\n  position: absolute;\n  top: 50px;\n  left: -50px;\n  transform: rotate(270deg);\n"]))),le=function(){var e=te().buttonAction;return Object(l.jsx)(re,{children:Object(l.jsx)(ne.a,{query:"(max-width: 568px)",children:Object(l.jsxs)(ie,{children:[Object(l.jsx)(ae,{onPointerDown:function(){return e("ArrowUp")}}),Object(l.jsx)(se,{onPointerDown:function(){return e("ArrowRight")}}),Object(l.jsx)(ce,{onPointerDown:function(){return e("ArrowDown")}}),Object(l.jsx)(ue,{onPointerDown:function(){return e("ArrowLeft")}})]})})})},de=(t(44),b.a.div(G||(G=Object(u.a)(["\n  position: relative;\n  text-align: center;\n  height: 100%;\n  width: 100%;\n"])))),he=function(){return Object(l.jsxs)(de,{children:[Object(l.jsx)(d,{}),Object(l.jsx)(Y,{}),Object(l.jsx)(Q,{}),Object(l.jsx)(_,{}),Object(l.jsx)(le,{})]})},fe=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,46)).then((function(n){var t=n.getCLS,r=n.getFID,i=n.getFCP,o=n.getLCP,a=n.getTTFB;t(e),r(e),i(e),o(e),a(e)}))};c.a.render(Object(l.jsx)(a.a.StrictMode,{children:Object(l.jsx)(R.a,{store:A,children:Object(l.jsx)(he,{})})}),document.getElementById("root")),fe()}},[[45,1,2]]]);
//# sourceMappingURL=main.0e9acf1a.chunk.js.map